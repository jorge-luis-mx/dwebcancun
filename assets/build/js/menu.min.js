window.addEventListener("DOMContentLoaded",e=>{let t=window.location,n=t.pathname.split("/")[1],o=t.protocol+"//"+t.host+"/"+n;const s=document.getElementById("btn-menu");null!=s&&s.addEventListener("click",e=>{d.showMenu(e)});const r=document.getElementById("submitContact");null!=r&&r.addEventListener("click",e=>{d.contactSubmit(o,e)});const a=document.querySelectorAll(".iam-input");null!=a&&a.forEach(e=>{e.addEventListener("keypress",e=>{d.removeError(e)})});const c=document.querySelectorAll(".justnumeric");null!=c&&c.forEach(e=>{e.addEventListener("keypress",e=>{d.justNumeric(e)})});const l=/^[a-zA-ZÀ-ÿ\s]{1,40}$/,i=/^\d{7,14}$/,u=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,m=document.querySelectorAll("#contactoForm input");null!=m&&m.forEach(e=>{e.addEventListener("keyup",e=>{d.validarFormulario(e)}),e.addEventListener("blur",e=>{d.validarFormulario(e)})});const d={showMenu:function(e){var t,n=document.querySelector(".btn-menu span");"fas fa-bars"==n.getAttribute("class")?(n.classList.remove("fas","fa-bars"),n.classList.add("fas","fa-times"),(t=document.querySelector(".menu-link")).classList.add("mostrarMenuMovil"),t.classList.remove("quitarMenuMovil")):(n.classList.remove("fas","fa-times"),n.classList.add("fas","fa-bars"),(t=document.querySelector(".menu-link")).classList.add("quitarMenuMovil"),t.classList.remove("mostrarMenuMovil"))},validarFormulario:function(e){switch(e.target.name){case"nombre":this.ruleinputs(l,e.target,e.target.name);break;case"telefono":this.ruleinputs(i,e.target,e.target.name);break;case"correo":this.ruleinputs(u,e.target,e.target.name);break;case"pais":case"estado":case"ciudad":case"asunto":case"mensaje":this.ruleinputs(l,e.target,e.target.name)}},ruleinputs:function(e,t,n){e.test(t.value)?document.getElementById(n).classList.remove("danger-input"):(document.getElementById(n).classList.add("danger-input"),document.getElementById(n).focus())},contactSubmit:async function(e,t){t.preventDefault();const n=document.getElementById("contactoForm"),o=new FormData(n),s={nombre:o.get("nombre"),telefono:o.get("telefono"),correo:o.get("correo"),asunto:o.get("asunto"),mensaje:o.get("mensaje")};if(null==s.nombre||0==s.nombre||/^\s+$/.test(s.nombre))return this.errorActive("nombre"),!1;if(null==s.telefono||0==s.telefono||/^\s+$/.test(s.telefono))return this.errorActive("telefono"),!1;if(!/\w+([-+.']\w+)*@\w+([-.]\w+)/.test(s.correo))return this.errorActive("correo"),!1;if(null==s.asunto||0==s.asunto||/^\s+$/.test(s.asunto))return this.errorActive("asunto"),!1;if(null==s.mensaje||0==s.mensaje||/^\s+$/.test(s.mensaje))return console.log(s.mensaje),this.errorActive("mensaje"),!1;try{const e=await fetch("controllers/EmailController.php",{method:"post",body:o});if(200==(await e.json()).status){Swal.fire("Mensaje enviado correctamente!","click en button!","success");const e=document.querySelectorAll(".iam-input");null!=e&&e.forEach(e=>{e.value=""})}}catch(t){console.log("fetch failed",t)}},errorActive:function(e){const t=document.getElementById(`${e}`),n=t.nextElementSibling;null!=n&&(n.classList.remove("oculto"),n.classList.add("mostrar"),t.focus())},removeError:function(e){const t=e.target.nextElementSibling;t.classList.contains("mostrar")&&(t.classList.remove("mostrar"),t.classList.add("oculto"))},justNumeric:function(e){}}});